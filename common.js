(function () { var t = document.body.parentElement, e = [], n = null, i = document.body.classList.contains("typora-export-collapse-outline"), r = function (t, e, n) { document.addEventListener(t, function (t) { if (!t.defaultPrevented) for (var i = t.target; i && i != this; i = i.parentNode)if (i.matches(e)) { !1 === n.call(i, t) && (t.preventDefault(), t.stopPropagation()); break } }, !1) }; function o() { return t.scrollTop } r("click", ".outline-expander", function (t) { var e = this.closest(".outline-item-wrapper").classList; return e.contains("outline-item-open") ? e.remove("outline-item-open") : e.add("outline-item-open"), c(), !1 }), r("click", ".outline-item", function (t) { var e = this.querySelector(".outline-label"); if (location.hash = "#" + e.getAttribute("href"), i) { var n = this.closest(".outline-item-wrapper").classList; n.contains("outline-item-open") || n.add("outline-item-open"), l(), n.add("outline-item-active") } }); var a, s, u = function () { var t = o(); n = null; for (var i = 0; i < e.length && e[i][1] - t < 60; i++)n = e[i] }, l = function () { document.querySelectorAll(".outline-item-active").forEach(t => t.classList.remove("outline-item-active")), document.querySelectorAll(".outline-item-single.outline-item-open").forEach(t => t.classList.remove("outline-item-open")) }, c = function () { if (n) { l(); var t = document.querySelector('.outline-label[href="#' + (CSS.escape ? CSS.escape(n[0]) : n[0]) + '"]'); if (t) if (i) { var e = t.closest(".outline-item-open>ul>.outline-item-wrapper"); if (e) e.classList.add("outline-item-active"); else { for (var r = (t = t.closest(".outline-item-wrapper")).parentElement.closest(".outline-item-wrapper"); r;)r = (t = r).parentElement.closest(".outline-item-wrapper"); t.classList.add("outline-item-active") } } else t.closest(".outline-item-wrapper").classList.add("outline-item-active") } }; window.addEventListener("scroll", function (t) { a && clearTimeout(a), a = setTimeout(function () { u(), c() }, 300) }); var f = function () { s = setTimeout(function () { !function () { e = []; var t = o(); document.querySelector("#write").querySelectorAll("h1, h2, h3, h4, h5, h6").forEach(n => { var i = n.getAttribute("id"); e.push([i, t + n.getBoundingClientRect().y]) }) }(), u(), c() }, 300) }; window.addEventListener("resize", function (t) { s && clearTimeout(s), f() }), f() })();
const body = document.body;const menuDiv = document.createElement('div');menuDiv.id = 'menu';var homeLink = document.createElement('a');homeLink.href = '/';homeLink.textContent = '首页';menuDiv.appendChild(homeLink);body.insertBefore(menuDiv, body.firstChild);const sidebar = document.querySelector('div.outline-content');const adDiv = document.createElement('div');adDiv.id = 'ad';const imgHelper = document.createElement('img');imgHelper.id = 'helper';imgHelper.src = 'https://haibiiin.github.io/resources/HAibiiin-hepler.jpg';imgHelper.alt = '扫码关注HAibiiin小助手';const imgHelperSpan = document.createElement('span');imgHelperSpan.textContent = '扫码关注小助手';adDiv.appendChild(imgHelper);adDiv.appendChild(imgHelperSpan);sidebar.appendChild(adDiv);